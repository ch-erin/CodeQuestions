<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>移动端 CSS 像素对比测试</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: "Arial", sans-serif;
      }

      body {
        background-color: #f5f5f5;
        padding: 20px;
      }

      .container {
        max-width: 600px;
        margin: 0 auto;
        background: #fff;
        border-radius: 12px;
        padding: 24px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
      }

      .header {
        margin-bottom: 24px;
      }

      .header h1 {
        font-size: 20px;
        color: #333;
        margin-bottom: 8px;
      }

      .dpr-info {
        font-size: 14px;
        color: #666;
        padding: 8px 12px;
        background: #f0f7ff;
        border-left: 3px solid #409eff;
        border-radius: 4px;
        margin-bottom: 16px;
      }

      .test-section {
        margin-bottom: 32px;
      }

      .test-section h2 {
        font-size: 16px;
        color: #444;
        margin-bottom: 16px;
        padding-bottom: 8px;
        border-bottom: 1px solid #eee;
      }

      .pixel-item {
        margin-bottom: 20px;
      }

      .pixel-label {
        font-size: 14px;
        color: #666;
        margin-bottom: 8px;
        display: flex;
        justify-content: space-between;
      }

      .pixel-label span {
        color: #999;
        font-size: 12px;
      }

      /* 测试不同像素的边框 */
      .border-test {
        height: 60px;
        display: flex;
        align-items: center;
        justify-content: center;
        background: #fff;
        border-radius: 4px;
        /* 文字用于对比边框粗细 */
        font-size: 14px;
        color: #333;
      }

      /* 1. 0.5px 边框（部分浏览器不支持） */
      .border-0_5px {
        border: 0.5px solid #333;
      }

      /* 2. 1px 边框（原生） */
      .border-1px {
        border: 1px solid #333;
      }

      /* 3. 2px 边框（原生） */
      .border-2px {
        border: 2px solid #333;
      }

      /* 4. 适配后的 1px 物理像素（transform 方案） */
      .border-adapt-1px {
        position: relative;
        /* 避免内容被伪元素遮挡 */
        z-index: 1;
      }

      .border-adapt-1px::after {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 200%;
        height: 200%;
        border: 1px solid #333;
        border-radius: 8px; /* 对应原元素 4px，缩放后一致 */
        transform: scale(0.5);
        transform-origin: top left;
        box-sizing: border-box;
        z-index: -1;
      }

      /* 5. 适配后的 1px 物理像素（CSS 变量 + DPR 方案） */
      .border-calc-1px {
        border: calc(1px / var(--dpr)) solid #333;
      }

      .note {
        font-size: 12px;
        color: #999;
        margin-top: 4px;
        line-height: 1.5;
      }

      .simulate-tip {
        margin-top: 32px;
        padding: 12px;
        background: #fff8e6;
        border-left: 3px solid #ffc107;
        border-radius: 4px;
        font-size: 14px;
        color: #8a6d3b;
      }

      .simulate-tip ul {
        margin-top: 8px;
        padding-left: 20px;
        line-height: 1.8;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="header">
        <h1>移动端 CSS 像素对比测试</h1>
        <!-- 显示当前设备的 DPR（用于判断模拟环境） -->
        <div class="dpr-info">
          当前设备像素比（DPR）：<span id="dpr-value">--</span>
          <br />
          提示：在 Chrome 开发者工具中切换「手机设备」（如 iPhone 14、Pixel
          7）查看真实移动端效果
        </div>
      </div>

      <!-- 边框像素对比区域 -->
      <div class="test-section">
        <h2>1. 边框像素对比（最直观的粗细差异）</h2>

        <!-- 0.5px 边框 -->
        <div class="pixel-item">
          <div class="pixel-label">
            0.5px 边框 <span>部分浏览器不支持，可能显示为 1px 或模糊</span>
          </div>
          <div class="border-test border-0_5px">内容区域（边框 0.5px）</div>
          <p class="note">
            问题：在 DPR=2/3 设备上，部分浏览器会强制渲染为 1px，导致粗细不一致
          </p>
        </div>

        <!-- 1px 边框（原生） -->
        <div class="pixel-item">
          <div class="pixel-label">
            1px 边框（原生）
            <span>高清屏上会被渲染为 2px/3px 物理像素，视觉变粗</span>
          </div>
          <div class="border-test border-1px">内容区域（边框 1px 原生）</div>
          <p class="note">
            问题：DPR=2 时，1px CSS 像素 = 2px 物理像素，线条偏粗；DPR=3
            时更明显
          </p>
        </div>

        <!-- 2px 边框（原生） -->
        <div class="pixel-item">
          <div class="pixel-label">
            2px 边框（原生） <span>高清屏上渲染稳定，无模糊/粗细异常</span>
          </div>
          <div class="border-test border-2px">内容区域（边框 2px 原生）</div>
          <p class="note">
            优势：DPR=2 时=4px 物理像素，DPR=3 时=6px
            物理像素，均为整数倍，渲染准确
          </p>
        </div>

        <!-- 适配后的 1px 物理像素（transform 方案） -->
        <div class="pixel-item">
          <div class="pixel-label">
            适配 1px 物理像素（transform 方案）
            <span>模拟真实 1px 物理像素，精细无模糊</span>
          </div>
          <div class="border-test border-adapt-1px">
            内容区域（适配 1px 物理像素）
          </div>
          <p class="note">
            原理：先画 200% 大小的 1px 边框，再缩放 0.5 倍，对应 DPR=2 的 1px
            物理像素
          </p>
        </div>

        <!-- 适配后的 1px 物理像素（CSS 变量方案） -->
        <div class="pixel-item">
          <div class="pixel-label">
            适配 1px 物理像素（CSS 变量方案）
            <span>根据 DPR 动态计算，兼容性好</span>
          </div>
          <div class="border-test border-calc-1px">
            内容区域（CSS 变量适配 1px）
          </div>
          <p class="note">
            原理：通过 JS 获取 DPR，用 calc(1px / DPR)
            计算真实边框大小，适配所有 DPR 设备
          </p>
        </div>
      </div>

      <!-- 文字大小对比区域 -->
      <div class="test-section">
        <h2>2. 文字大小对比（影响可读性）</h2>

        <div class="pixel-item">
          <div class="pixel-label">
            12px 文字 <span>部分移动端浏览器最小支持 12px，更小会被放大</span>
          </div>
          <div class="border-test" style="font-size: 12px; border: none">
            测试文字大小：12px（最小可读阈值）
          </div>
        </div>

        <div class="pixel-item">
          <div class="pixel-label">
            14px 文字 <span>移动端常用正文大小，可读性好</span>
          </div>
          <div class="border-test" style="font-size: 14px; border: none">
            测试文字大小：14px（移动端正文常用）
          </div>
        </div>
      </div>

      <!-- 模拟测试提示 -->
      <div class="simulate-tip">
        电脑端模拟测试步骤：
        <ul>
          <li>1. 打开 Chrome 浏览器，按 F12 打开开发者工具</li>
          <li>2. 点击工具栏「设备切换按钮」（Ctrl+Shift+M）</li>
          <li>
            3. 在顶部设备列表选择常见手机（如 iPhone 14、Pixel 7、华为 P50 等）
          </li>
          <li>4. 观察不同像素的显示差异（重点看边框粗细、模糊程度）</li>
          <li>
            5. 可切换不同设备（不同 DPR）对比效果（如 iPhone DPR=2，Pixel 7
            DPR=3）
          </li>
        </ul>
      </div>
    </div>

    <script>
      // 获取当前设备的 DPR，并设置 CSS 变量
      const dpr = window.devicePixelRatio || 1;
      document.getElementById("dpr-value").textContent = dpr;
      // 设置 CSS 变量 --dpr，用于 calc 方案
      document.documentElement.style.setProperty("--dpr", dpr);

      // 可选：添加窗口大小变化监听，更新 DPR（实际移动端 DPR 固定，此为模拟用）
      window.addEventListener("resize", () => {
        const newDpr = window.devicePixelRatio || 1;
        document.getElementById("dpr-value").textContent = newDpr;
        document.documentElement.style.setProperty("--dpr", newDpr);
      });
    </script>
  </body>
</html>
